import{jQuery as t}from"../src/jquery-3.5.1-min.js";import a from"../custom/Paths.js";import s from"../custom/SVGIcons-min.js";import{clamp as e}from"../src/clamp-min.js";const n={category:1500,video:1500,channel:1500,featured:1500,trending:1500};export default{build(){const s={mobile:null,desktop:t(".menu-back, header.for-desktop"),class:{mobile:"body header.for-mobile",desktop:"body header.for-desktop, body .menu-back"},build:{desktop(){o.icons(),o.tabs.desktop(),o.channels(),o.featured(),o.trending();const a=a=>t(`.tab-category[category=${a.attr("category")}]`,a.parents(".tab-wrap")).addClass("active").siblings(".active").removeClass("active"),s=t=>t.addClass("hovered").siblings(".hovered").removeClass("hovered");t(".primary-nav").off("mouseenter").on("mouseenter",".with-tabs.is-created",(function(){const e=t(".tab-list .tab-button:first-of-type",this);s(e),a(e),o.content(e)})),t(".primary-nav .with-tabs").off("mouseover").on("mouseover",".tab-button:not(.hovered)",(function(){s(t(this)),a(t(this)),o.content(t(this))})),t(".primary-nav .nav > .has-sub-menu").on("mouseenter",(function(){const a=t(".menu-box",this);t(".menu-back").css({height:`${a.outerHeight()}px`,transform:"translate(-50%, 0)"}).addClass("open")})).on("mouseleave",(function(){t(".menu-back").css({height:"30px",transform:"translate(-50%, -30px)"}).removeClass("open")})),t(".top-account .account-menu").hover((function(){t(".top-account .account-menu .submenu").stop(!0).slideDown(200).addClass("open")}),(function(){t(".top-account .account-menu .submenu").stop(!0).slideUp(200).removeClass("open")}))},mobile(){o.icons(),o.tabs.mobile(),o.channels(!0),o.featured(!0),t(".banner .hamburger").off("click").on("click",(()=>t(".banner .hamburger, .primary-nav").toggleClass("open"))),t(".top-search .search-submit").off("click").on("click",(function(a){t(this).hasClass("open")||t(".top-search .search-field").is(":focus")||(a.preventDefault(),t((t("body").width()<662?".brand, ":"")+".top-search, .search-submit, .menu-spacer",t(this).parents(".lower")).addClass("open"),setTimeout((()=>{t(".top-search .search-field").focus()}),200))})),t(".top-search .search-field").off("blur").on("blur",(function(){setTimeout((()=>{t(".brand, .top-search, .search-submit, .menu-spacer",t(this).parents(".lower")).removeClass("open")}),50)}));const a=(t,a)=>t[a?"slideDown":"slideUp"]("600");t(".nav > .menu-item > a").off("click").on("click",(function(){const s=t(this).parents(".menu-item"),e=s.hasClass("active"),n=s.parents(".nav").find(".menu-item.active");n.length&&n.removeClass("active"),n.length&&n.hasClass("has-sub-menu")&&a(t(".menu-box",n),!1),!e&&s.hasClass("has-sub-menu")&&a(t(".menu-box",s),!0),!e&&s.addClass("active")})),t(".primary-nav .with-tabs").off("click").on("click",".tab-button",(function(){const s=t(this).parents(".tab-wrap"),e=t(this).hasClass("active"),n=t(".tab-category.active",s),i=t(`.tab-category[category=${t(this).attr("category")}]`,s);!e&&o.content(t(this)),n.length&&a(n,!1),t(".active",s).removeClass("active"),!e&&(a(i,!0),t(this).addClass("active"),i.addClass("active"))}))}}};t.get(`${a.theme}/views/partials/header-mobile.html`,(a=>s.mobile=t(a))),t('<img class="hidden-image" />').appendTo(".menu-back");const e=new c,n=a=>{e.run((()=>{const e=a&&!t(s.class.mobile).length,n=!a&&!t(s.class.desktop).length;if(!e&&!n)return void i();const o=e?"mobile":"desktop",c=e?"desktop":"mobile";s[o].prependTo(".body-wrap"),s[c]=t(s.class[c]).clone(!0),t(s.class[c]).remove(),s.build[o](),i()}),250)},i=()=>{const a=t(".page-loader");a.length&&setTimeout((()=>{const s=t(".lower .brand .logo"),e=t(".page-loader .loader-logo"),n=t(".page-loader .loader");t([document.documentElement,document.body]).scrollTop(0),e.css({left:e.offset().left,top:e.offset().top}),e.css({left:s.offset().left,top:s.offset().top,height:s.height(),width:s.width(),margin:"unset",transform:"translateY(0)"}),n.css("opacity",0),setTimeout((()=>{a.css("opacity",0),setTimeout((()=>a.remove()),1200);const s=window.location.href.match(/#[^?]+/);s&&t([document.documentElement,document.body]).animate({scrollTop:t(s[0]).offset().top-170},800)}),750)}),250)},d=()=>{const a=t("body");t(window).width()<=1176?(a.addClass("for-mobile").removeClass("for-desktop"),n(!0)):t(window).width()>1176&&(a.addClass("for-desktop").removeClass("for-mobile"),n(!1))};t(window).on("resize",d);const l=()=>{const a=t(".banner.for-desktop, body"),s=t(window).scrollTop();0!=s||a.hasClass("at-top")?s>0&&a.hasClass("at-top")&&a.removeClass("at-top"):a.addClass("at-top"),s>200&&!a.hasClass("scrolled")?a.addClass("scrolled"):s<=200&&a.hasClass("scrolled")&&a.removeClass("scrolled")};t(window).on("scroll",l),d(),l(),t("body").hasClass("for-desktop")&&s.build.desktop()}};const o={icons(){t(".fa-icon").each((function(){const s=t(this).attr("class"),e=s.match(/(?<=svg-)([^ "]+)/),n=s.match(/(?<=el-)([^ "]+)/),o=s.match(/(?<=type-)([^ "]+)/),i=s.match(/(?<=color-)([^ "]+)/),c=s.match(/(?<=hover-)([^ "]+)/);e&&o&&t.get(`${a.fonts}/font-awesome/${o[0]}/${e[0]}.svg`,(a=>{const s=n?t(n[0],this):t(this);s.html(t(a).find("svg")),t("svg",this).css("opacity","1"),c&&setTimeout((()=>{s.on("mouseover",(function(){!t(this).data("color")&&t(this).data("color",t(this).css("background-color")),t(this).css("background-color",`#${c[0]}80`)})).on("mouseout",(function(){t(this).css("background-color",t(this).data("color"))}))}),1e3),i&&s.css("background-color",`#${i[0]}`)}))}))},channels(s=!1){t(".nav .is-list:not(.is-created)").each((function(){const e=t(this),o=e.attr("class"),i=(o.match(/(?<=type-)([^ "]+)/)||[])[0],c=(o.match(/(?<=tax-)([^ "]+)/)||[])[0];e.data({type:i,tax:c}),c&&setTimeout((()=>{t.ajax({url:a.ajax,data:{action:"get_categories",nonce:t(".banner").data("nonce"),taxonomy:c}}).done((function(a){a=JSON.parse(a.replace(/0$/,""));let n=t('<div class="list-wrap menu-box" />').appendTo(e);s&&(n.removeClass("list-wrap"),n=t('<div class="list-wrap" />').appendTo(n)),a.length&&t.each(a,((t,a)=>{n.append(`<a href="${a.link}" category="${a.slug}" data-id="${a.term_id}" class="list-button">\n\t\t\t\t\t\t\t\t\t\t\t<img class="list-image" src="${a.image}" />\n\t\t\t\t\t\t\t\t\t\t\t<span class="list-count">${a.count} Videos</span>\n\t\t\t\t\t\t\t\t\t\t\t<span class="list-title">${a.name}</span>\n\t\t\t\t\t\t\t\t\t\t</a>`)}))})),e.addClass("is-created"),n.channel=0}),n.channel)}))},featured(s=!1){const o=t(".has-sub-menu.is-featured:not(.is-created)");if(!o.length)return;o.append(`\n\t\t\t\t<div class="${s?"":"featured-wrap "}menu-box">\n\t\t\t\t\t${s?'<div class="featured-wrap">':""}\n\t\t\t\t\t\t<a id="${i()}" href="#" class="tab-post loader"></a>\n\t\t\t\t\t\t<a id="${i()}" href="#" class="tab-post loader"></a>\n\t\t\t\t\t\t<a id="${i()}" href="#" class="tab-post loader"></a>\n\t\t\t\t\t\t<a id="${i()}" href="#" class="tab-post loader"></a>\n\t\t\t\t\t${s?"</div>":""}\n\t\t\t\t</div>\n\t\t\t`).addClass("is-created");const c=t(".featured-wrap"),d=t(".loader",c);d.html('<div class="load-ripple"><div></div><div></div></div>'),setTimeout((()=>{t.ajax({url:a.ajax,data:{action:"get_featured",nonce:t(".banner").data("nonce")}}).done((function(a){(a=JSON.parse(a.replace(/0$/,""))).length?t(d).each((function(s){const n=a[s];if(t(this).attr("href",n?n.link:"#").html(n?`\n\t\t\t\t\t\t\t\t<div class="thumb" style="background-image: url(${n.image})">\n\t\t\t\t\t\t\t\t\t<div class="time">\n\t\t\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\t\t\t<span class="number">${n.readTime}</span>\n\t\t\t\t\t\t\t\t\t\t\t<span class="small"> min${1==n.readTime?"":"s"}</span>\n\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<span class="title">${n.title}</span>`:""),n){const a=t(".title",this),s=a.text();e(a.get(0),{clamp:3}),t(this).attr("title",s)}})):t(d).html("")})),n.featured=0}),n.featured)},tabs:{desktop(){t(".nav .with-tabs:not(.is-created)").each((function(){const e=t(this),c=e.attr("class"),d=(c.match(/(?<=type-)([^ "]+)/)||[])[0],l=(c.match(/(?<=tax-)([^ "]+)/)||[])[0];t(this).data({type:d,tax:l}),l&&setTimeout((()=>{t.ajax({url:a.ajax,data:{action:"get_categories",nonce:t(".banner").data("nonce"),taxonomy:l}}).done((function(a){a=JSON.parse(a.replace(/0$/,"")),e.append(t('<div class="tab-wrap menu-box">\n\t\t\t\t\t\t\t\t\t<div class="tab-list"></div>\n\t\t\t\t\t\t\t\t\t<div class="tab-box"></div>\n\t\t\t\t\t\t\t\t</div>')),a.length&&t.each(a,((a,n)=>{t(".tab-list",e).append(`<a href="${n.link}" category="${n.slug}" data-id="${n.term_id}" class="tab-button">\n\t\t\t\t\t\t\t\t\t\t\t<span class="tab-title">${n.name}</span>\n\t\t\t\t\t\t\t\t\t\t\t<i class="tab-icon"></i>\n\t\t\t\t\t\t\t\t\t\t</a>`),t(".tab-box",e).append(`<div class="tab-category" category="${n.slug}" data-page=0>\n\t\t\t\t\t\t\t\t\t\t\t<a id="${i()}" href="#" class="tab-post loader"></a>\n\t\t\t\t\t\t\t\t\t\t\t<a id="${i()}" href="#" class="tab-post loader"></a>\n\t\t\t\t\t\t\t\t\t\t\t<a id="${i()}" href="#" class="tab-post loader"></a>\n\t\t\t\t\t\t\t\t\t\t\t<div class="tab-tub back">\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="tab-nav start disabled" action="start" category="${n.slug}">${s.fast}</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="tab-nav prev disabled" category="${n.slug}">${s.arrow}</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<a href="${n.link}" class="tab-nav all" category="${n.slug}">${s.all}</a>\n\t\t\t\t\t\t\t\t\t\t\t<div class="tab-tub forward">\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="tab-nav next disabled" category="${n.slug}">${s.arrow}</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="tab-nav end disabled" action="end" category="${n.slug}">${s.fast}</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>`),t(`.tab-category[category=${n.slug}]`,e).on("click","div.tab-nav:not(.disabled)",(function(){o.content(t(this).parents(".tab-wrap").find(`.tab-button[category=${t(this).attr("category")}]`),t(this).hasClass("next")?1:-1,t(this).attr("action"))}))}))})),e.addClass("is-created"),n[l]=0}),n[l])}))},mobile(){t(".nav .with-tabs:not(.is-created)").each((function(){const e=t(this),c=e.attr("class"),d=(c.match(/(?<=type-)([^ "]+)/)||[])[0],l=(c.match(/(?<=tax-)([^ "]+)/)||[])[0];e.data({type:d,tax:l}),l&&setTimeout((()=>{t.ajax({url:a.ajax,data:{action:"get_categories",nonce:t(".banner").data("nonce"),taxonomy:l}}).done((function(a){a=JSON.parse(a.replace(/0$/,"")),e.append(t('<div class="menu-box for-tabs">\n\t\t\t\t\t\t\t\t\t<div class="tab-wrap"></div>\n\t\t\t\t\t\t\t\t</div>')),a.length&&t.each(a,((a,n)=>{t(".tab-wrap",e).append(`<div category="${n.slug}" data-id="${n.term_id}" class="tab-button">\n\t\t\t\t\t\t\t\t\t\t\t<span class="tab-title">${n.name}</span>\n\t\t\t\t\t\t\t\t\t\t\t<i class="tab-icon"></i>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class="tab-category" category="${n.slug}" data-page=0>\n\t\t\t\t\t\t\t\t\t\t\t<div class="tab-box">\n\t\t\t\t\t\t\t\t\t\t\t\t<a id="${i()}" href="#" class="tab-post loader"></a>\n\t\t\t\t\t\t\t\t\t\t\t\t<a id="${i()}" href="#" class="tab-post loader"></a>\n\t\t\t\t\t\t\t\t\t\t\t\t<a id="${i()}" href="#" class="tab-post loader"></a>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="tab-flex">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="tab-tub back">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="tab-nav start disabled" action="start" category="${n.slug}">${s.fast}</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="tab-nav prev disabled" category="${n.slug}">${s.arrow}</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<a href="${n.link}" class="tab-nav all" category="${n.slug}">${s.all}</a>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="tab-tub forward">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="tab-nav next disabled" category="${n.slug}">${s.arrow}</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="tab-nav end disabled" action="end" category="${n.slug}">${s.fast}</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>`),t(`.tab-category[category=${n.slug}]`,e).on("click","div.tab-nav:not(.disabled)",(function(){o.content(t(this).parents(".tab-wrap").find(`.tab-button[category=${t(this).attr("category")}]`),t(this).hasClass("next")?1:-1,t(this).attr("action"))}))}))})),e.addClass("is-created"),n[l]=0}),n[l])}))}},content(s,n=0,o=null){if(0!=n&&t(s).data("loaded",!1),!t(s).data("loaded")){t(s).data("loaded",!0);const i=t(s).attr("category"),c=t(s).data("id"),d=t(s).parents(".tab-wrap").find(`.tab-category[category=${i}]`),l=t(".loader",d),r=t(s).parents(".with-tabs").data("type");let u=parseInt(d.data("page"))+n,p=d.data("count");p%3==0&&(p-=1),o&&(u="start"==o?0:Math.floor(p/3)),d.data("page",u),l.html('<div class="load-ripple"><div></div><div></div></div>'),t.ajax({url:a.ajax,data:{action:"get_posts",nonce:t(".banner").data("nonce"),termId:c,category:i,type:r,page:3*u,getCount:!d.data("hasCount")}}).done((function(a){(a=JSON.parse(a.replace(/0$/,""))).items.length?(a.count&&d.data("count",a.count).data("hasCount",!0),p=d.data("count"),t(".tab-nav",d).removeClass("disabled"),0==u&&t(".prev, .start",d).addClass("disabled"),3*u>=p-3&&t(".next, .end",d).addClass("disabled"),t(l).each((function(s){const n=a.items[s];if(t(this).attr("href",n?n.link:"#").html(n?`\n\t\t\t\t\t\t\t\t<div class="thumb" style="background-image: url(${n.image})">\n\t\t\t\t\t\t\t\t\t<div class="time">\n\t\t\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\t\t\t<span class="number">${n.readTime}</span>\n\t\t\t\t\t\t\t\t\t\t\t<span class="small"> min${1==n.readTime?"":"s"}</span>\n\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<span class="title">${n.title}</span>`:""),n){const a=t(".title",this),s=a.text();e(a.get(0),{clamp:3}),t(this).attr("title",s)}}))):t(l).html("")}))}},trending(){setTimeout((()=>{t.ajax({url:a.ajax,data:{action:"get_trending",nonce:t(".banner").data("nonce")}}).done((function(a){a=JSON.parse(a.replace(/0$/,"")),t(".trending-wrap:not(.is-created)").append(`\n\t\t\t\t\t\t<a id="${i()}" href="#" class="trending-button disabled"></a>\n\t\t\t\t\t\t<a id="${i()}" href="#" class="trending-button disabled"></a>\n\t\t\t\t\t\t<a id="${i()}" href="#" class="trending-button disabled"></a>\n\t\t\t\t\t\t<a id="${i()}" href="#" class="trending-button disabled"></a>\n\t\t\t\t\t`).addClass("is-created"),t(".trending-wrap .trending-button").each((function(s){const e=a[s];e?t(this).attr("href",e.link).text(e.title):t(this).addClass("empty")}));const s=()=>{const a=t(".trending-wrap .trending-button.disabled:not(.empty)"),s=Math.floor(Math.random()*a.length)+1;a.eq(s).removeClass("disabled").siblings().addClass("disabled")};s(),setInterval(s,1e4)})),n.trending=0}),n.trending)}};t.fn.changeType=function(a){const s={};return this.each((function(){t.each(t(this)[0].attributes,(function(t,a){s[a.nodeName]=a.nodeValue})),t(this).replaceWith((function(){return t(`<${a}/>`,s).append(t(this).contents())}))}))};const i=()=>"_"+Math.random().toString(36).substr(2,9);class c{run(t,a){this.time=a,this.callback=t,this._action()}_action(){this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(this.callback,this.time)}}