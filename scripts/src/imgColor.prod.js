"use strict";var _jquery=require("./jquery3.4.1.js");function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var imgColor={pluginName:"imgColor",canvas:document.createElement("canvas"),SIDE_TOP:"t",SIDE_RIGHT:"r",SIDE_BOTTOM:"b",SIDE_LEFT:"l",dfdCache:{},getDfd:function(e){var t=this.dfdCache[e];return t||(t=_jquery.jQuery.Deferred(),this.dfdCache[e]=t),t},decToHex:function(e){var t=e.toString(16);return 1===t.length?"0"+t:t},rgbToHex:function(e,t,r){return["#",decToHex(e),decToHex(t),decToHex(r)].join("")},count:function(e,t,r){var o;t[e+3]<127||(r[o=rgbToHex(t[e],t[e+1],t[e+2])]?r[o]++:r[o]=1)},traverse:function(e,t,r,o,n){var i,c;if(e===this.SIDE_TOP||e===this.SIDE_BOTTOM)for(c=e===this.SIDE_TOP?0:o-1,i=0;i<r;i++)this.count(4*(c*r+i),n,t);else for(--o,i=e===this.SIDE_RIGHT?r-1:0,c=1;c<o;c++)this.count(4*(c*r+i),n,t)},computeByImage:function(e,t){var r,o,n,i="#ffffff",c=0,u={},s=e.width,f=e.height,a=this.canvas.getContext("2d");for(o in this.canvas.width=s,this.canvas.height=f,a.drawImage(e,0,0),r=a.getImageData(0,0,s,f).data,t.indexOf(this.SIDE_TOP)<0&&this.traverse(this.SIDE_TOP,u,s,f,r),t.indexOf(this.SIDE_RIGHT)<0&&this.traverse(this.SIDE_RIGHT,u,s,f,r),t.indexOf(this.SIDE_BOTTOM)<0&&this.traverse(this.SIDE_BOTTOM,u,s,f,r),t.indexOf(this.SIDE_LEFT)<0&&this.traverse(this.SIDE_LEFT,u,s,f,r),u)c<(n=u[o])&&(i=o,c=n);return i},compute:function(t,e){var r=this,o=new Image,n={url:t,ignore:e};o.onload=function(){try{n.color=computeByImage(r,e),r.getDfd(t).resolve(n)}catch(e){r.getDfd(t).reject(n)}o=null},o.onerror=function(){o.onerror=null,o=null,r.getDfd(t).reject(n)},o.crossOrigin="",o.src=t},imageColor:{color:function(e){var t=imgColor,r=t.getDfd(e.url);"function"==typeof e.success&&r.done(e.success),"function"==typeof e.error&&r.fail(e.error),"pending"===r.state()&&t.compute(e.url,"string"==typeof e.ignore?e.ignore:"")}}};function Plugin(r,o,e){var n=(0,_jquery.jQuery)(r),t=n.data("imgColorIgnore");"object"===_typeof(o)&&(e=o,o=void 0),e=_jquery.jQuery.extend({url:r.src},e),"string"==typeof t&&(e.ignore=t),e.success=function(e){var t="function"==typeof o?o.call(r,r,e.color):"string"==typeof o?(0,_jquery.jQuery)(o):n.parent();t&&t.jquery&&t.css("backgroundColor",e.color)},imgColor.imageColor.color(e)}_jquery.jQuery.fn[imgColor.pluginName]=function(e,t){return this.each(function(){new Plugin(this,e,t)})};