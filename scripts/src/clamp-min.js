/*!
* Clamp.js 0.5.1
*
* Copyright 2011-2013, Joseph Schmitt http://joe.sh
* Released under the WTFPL license
* http://sam.zoy.org/wtfpl/
*/
export function clamp(e,t){t=t||{};var n,l=window,i={clamp:t.clamp||2,useNativeClamp:void 0===t.useNativeClamp||t.useNativeClamp,splitOnChars:t.splitOnChars||[".","-","–","—"," "],animate:t.animate||!1,truncationChar:t.truncationChar||"…",truncationHTML:t.truncationHTML},a=e.style,r=e.innerHTML,o=void 0!==e.style.webkitLineClamp,u=i.clamp,c=u.indexOf&&(u.indexOf("px")>-1||u.indexOf("em")>-1);function s(e,t){return l.getComputedStyle||(l.getComputedStyle=function(e,t){return this.el=e,this.getPropertyValue=function(t){var n=/(\-([a-z]){1})/g;return"float"==t&&(t="styleFloat"),n.test(t)&&(t=t.replace(n,(function(){return arguments[2].toUpperCase()}))),e.currentStyle&&e.currentStyle[t]?e.currentStyle[t]:null},this}),l.getComputedStyle(e,null).getPropertyValue(t)}function p(t){var n=t||e.clientHeight,l=h(e);return Math.max(Math.floor(n/l),0)}function h(e){var t=s(e,"line-height");return"normal"==t&&(t=1.2*parseInt(s(e,"font-size"))),parseInt(t)}i.truncationHTML&&((n=document.createElement("span")).innerHTML=i.truncationHTML);var d,C,m,f,v=i.splitOnChars.slice(0),g=v[0];function y(t){return t.lastChild.children&&t.lastChild.children.length>0?y(Array.prototype.slice.call(t.children).pop()):t.lastChild&&t.lastChild.nodeValue&&""!=t.lastChild.nodeValue&&t.lastChild.nodeValue!=i.truncationChar?t.lastChild:(t.lastChild.parentNode.removeChild(t.lastChild),y(e))}function H(e,t){e.nodeValue=t+i.truncationChar}if("auto"==u?u=p():c&&(u=p(parseInt(u))),o&&i.useNativeClamp)a.overflow="hidden",a.textOverflow="ellipsis",a.webkitBoxOrient="vertical",a.display="-webkit-box",a.webkitLineClamp=u,c&&(a.height=i.clamp+"px");else{var L=(f=u,h(e)*f);L<=e.clientHeight&&(m=function t(l,a){if(a){var r=l.nodeValue.replace(i.truncationChar,"");if(d||(g=v.length>0?v.shift():"",d=r.split(g)),d.length>1?(C=d.pop(),H(l,d.join(g))):d=null,n&&(l.nodeValue=l.nodeValue.replace(i.truncationChar,""),e.innerHTML=l.nodeValue+" "+n.innerHTML+i.truncationChar),d){if(e.clientHeight<=a){if(!(v.length>=0&&""!=g))return e.innerHTML;H(l,d.join(g)+g+C),d=null}}else""==g&&(H(l,""),l=y(e),v=i.splitOnChars.slice(0),g=v[0],d=null,C=null);if(!i.animate)return t(l,a);setTimeout((function(){t(l,a)}),!0===i.animate?10:i.animate)}}(y(e),L))}return{original:r,clamped:m}}